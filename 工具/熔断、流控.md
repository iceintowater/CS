Eudemon
## 定义
流控&应急熔断中间件

## 功能
流量控制、应急熔断、过载保护等

## 流量控制
### 限流策略
#### 滑动窗口：在一个时间窗口，统计资源访问次数，达到阈值则不访问，下一个窗口重新统计次数

缺点容易产生流量毛刺

#### 令牌桶：
有一个装下b个令牌的桶，当令牌数多于b，多余令牌将会丢弃。每秒一个的速度往桶里加令牌，现有有一个大小n的数据包，则替换掉桶里的n个令牌，如果桶里令牌数不够n个,则数据包将会限流，要么丢弃要么在缓冲区。


### 应急熔断
部分业务场景，希望⽴即阻⽌对资源R的访问，因此，Eudemon设计了应急熔断功能。当设置了对资源R进⾏熔断时， 针对该资源的访问，Eudemon会⽴即进⾏拦截，直接拒绝该资源的访问。

### 流量控制
Eudemon会实时收集应⽤系统的QPS、RT、并发线程数以及系统负载等指标，⽤来评估应⽤系统当前的最⼤负载能 ⼒，进⽽判断应⽤系统当前是否过载。当发现过载时，会⽴即进⾏流控，拦截后续进⼊应⽤系统的请求。直到应⽤系统
处理完现有的请求，Eudemon才会放⾏后续的请求进⼊

## 架构

组件：资源访问拦截器、mvel表达式、动态规则引擎、流量&熔断

##流图

流量被拦截器拦截，拦截器调用mvel表达式，匹配命中的限流规则。拦截器调用流量熔断，传递其中的限流规则。流量&熔断统计统计资源访问情况，
计算该请求是否超出限额。超额就拦截，不然就放行









