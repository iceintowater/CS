# 巡演与优化
  ## db 
  慢查询 高访问  reload   read 读库
  ## redis缓存 
  高访问
  连接池
  慢查询
  ## 服务依赖 
# 压测
大促来临前，防止出现问题。

## 压测工具
jmeter

## 种类【不同纬度分类】
- 流量真实性 ：   
     仿真压测：程序构造，人工构造，nginx日志构造，缺点是会形成热点数据    
     引流压测：tcpproxy复制真实流量,将流量迎流到压测集群中，还可以放大n倍，观察机器负载能力        
- 流量呈现方式：读压测、写压测、混合压测    
- 流量冷热程度
  离散压测、热点压测（热点压测一般在缓存中，无法正确评估能力）
- 服务机环境：    
  隔离集群压测：流量引流到压测集群中
  线上集群压测：逐步减少服务器数量
- 服务机数量
  单机压测、集群压测
- 压测范围：  
  全链路压测【可能出现非核心链路调用出现问题导致核心链路出现问题、链路中各个服务出现竞争资源的问题】  
  组件压测
  
## 全链路压测过程   
（1）准备阶段         
### 业务层：
确立核心业务  
确立业务边界：哪些不需要压测的，哪些需要降级的
做好降级预案
### 工具层面：       
识别压测流量，对压测流量打标记，防止污染统计数据         
数据隔离存储：与真实数据进行隔离，建立影子表，缓存、中间件、目录

（2）步骤        
 准备好压测工具（mock 数据）、预演、真实模拟、监控、形成报告（总结）、推进
