##事务  
### acid
原子性
一致性
隔离性：可见
持久性    
  
### 并发一致性问题 由于隔离性无法满足的并发一致性问题     
丢失修改  a修改  b修改     
脏读     a修改  b读 a撤回    
不可重复读   b读 a修改，b在读   
幻影读     b读，a插入，b读    

### 锁      
粒度：行锁和表锁   
类别：读锁、写锁、ix、is锁（之前锁了行锁，需要遍历，要消耗大量的时间）    

协议
一级：写操作加写锁直到事务执行完
二级：在一级基础上，读操作加读锁直到读完
三级：在二级基础上，读操作加读锁直到事务执行完
两段锁协议：加锁和释放锁分两阶段


### 数据库中实现的隔离级别
未提交读
提交读
可重复读
可串行化

### mvcc
用于实现提交读和可重复读这两种隔离级别  
更改是作用于当前的事务
查是作用于已经提交的快照
在 MVCC 中事务的修改操作（DELETE、INSERT、UPDATE）会为数据行新增一个版本快照。
脏读和不可重复读最根本的原因是事务读取到其它事务未提交的修改。在事务进行读取操作时，为了解决脏读和不可重复读问题，MVCC 规定只能读取已经提交的快照。当然一个事务可以读取自身未提交的快照，这不算是脏读。


